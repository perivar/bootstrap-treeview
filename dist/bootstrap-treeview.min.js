!function(b,t,e,n){"use strict";var i="treeview",d={};d.settings={injectStyle:!0,levels:2,lazyLoad:!1,readOnly:!1,expandIcon:"fas fa-plus",collapseIcon:"fas fa-minus",emptyIcon:"fas",nodeIcon:"",selectedIcon:"",checkedIcon:"far fa-check-square",uncheckedIcon:"far fa-square",color:n,backColor:n,borderColor:n,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:n,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:n,onNodeCollapsed:n,onNodeDisabled:n,onNodeEnabled:n,onNodeExpanded:n,onNodeSelected:n,onNodeUnchecked:n,onNodeUnselected:n,onSearchComplete:n,onSearchCleared:n},d.options={silent:!1,ignoreChildren:!1},d.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};var r=function(e,t){return this.keys={tab:9,enter:13,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40},this.$visibleItems=null,this.$element=b(e),this.elementId=e.id,this.styleId=this.elementId+"-style",this.init(t),{options:this.options,init:b.proxy(this.init,this),remove:b.proxy(this.remove,this),getNode:b.proxy(this.getNode,this),getParent:b.proxy(this.getParent,this),getSiblings:b.proxy(this.getSiblings,this),getSelected:b.proxy(this.getSelected,this),getUnselected:b.proxy(this.getUnselected,this),getExpanded:b.proxy(this.getExpanded,this),getCollapsed:b.proxy(this.getCollapsed,this),getChecked:b.proxy(this.getChecked,this),getUnchecked:b.proxy(this.getUnchecked,this),getDisabled:b.proxy(this.getDisabled,this),getEnabled:b.proxy(this.getEnabled,this),selectNode:b.proxy(this.selectNode,this),unselectNode:b.proxy(this.unselectNode,this),toggleNodeSelected:b.proxy(this.toggleNodeSelected,this),collapseAll:b.proxy(this.collapseAll,this),collapseNode:b.proxy(this.collapseNode,this),expandAll:b.proxy(this.expandAll,this),expandNode:b.proxy(this.expandNode,this),toggleNodeExpanded:b.proxy(this.toggleNodeExpanded,this),revealNode:b.proxy(this.revealNode,this),checkAll:b.proxy(this.checkAll,this),checkNode:b.proxy(this.checkNode,this),uncheckAll:b.proxy(this.uncheckAll,this),uncheckNode:b.proxy(this.uncheckNode,this),toggleNodeChecked:b.proxy(this.toggleNodeChecked,this),disableAll:b.proxy(this.disableAll,this),disableNode:b.proxy(this.disableNode,this),enableAll:b.proxy(this.enableAll,this),enableNode:b.proxy(this.enableNode,this),toggleNodeDisabled:b.proxy(this.toggleNodeDisabled,this),search:b.proxy(this.search,this),clearSearch:b.proxy(this.clearSearch,this)}};r.prototype.init=function(e){this.tree=[],this.nodes=[],e.data&&("string"==typeof e.data&&(e.data=b.parseJSON(e.data)),this.tree=b.extend(!0,[],e.data),delete e.data),this.options=b.extend({},d.settings,e),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},r.prototype.remove=function(){this.destroy(),b.removeData(this,i),b("#"+this.styleId).remove()},r.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},r.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("keydown"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},r.prototype.subscribeEvents=function(){var t=this;this.unsubscribeEvents(),this.$element.on("click",b.proxy(this.clickHandler,this)),this.$element.on("keydown",function(e){return t.handleKeyDown(b(this),e)}),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},r.prototype.setInitialStates=function(e,o){if(e.nodes){o+=1;var s=e,i=this;b.each(e.nodes,function(e,t){t.nodeId=i.nodes.length,t.parentId=s.nodeId,t.hasOwnProperty("selectable")||(t.selectable=!0),t.state=t.state||{},t.state.hasOwnProperty("checked")||(t.state.checked=!1),t.state.hasOwnProperty("disabled")||(t.state.disabled=!1),t.state.hasOwnProperty("expanded")||(!t.state.disabled&&o<i.options.levels&&t.nodes&&0<t.nodes.length?t.state.expanded=!0:t.state.expanded=!1),t.state.hasOwnProperty("selected")||(t.state.selected=!1),i.nodes.push(t),t.nodes&&i.setInitialStates(t,o)})}},r.prototype.handleKeyDown=function(e,t){var o=b(t.target),s=this.options;if(s.setSelectedFocus=!0,t.altKey||t.ctrlKey||t.shiftKey&&t.keyCode!=this.keys.tab)return!0;var i=this.$visibleItems.index(o);switch(t.keyCode){case this.keys.tab:return!0;case this.keys.home:var n=this.$visibleItems.first(),d=this.findNode(n);return this.selectNode(d,s),t.stopPropagation(),!1;case this.keys.end:var r=this.$visibleItems.last(),a=this.findNode(r);return this.selectNode(a,s),t.stopPropagation(),!1;case this.keys.enter:case this.keys.space:if(o.is(".tree-parent")){var h=this.findNode(o);this.toggleNode(o.children("."+this.options.emptyIcon),h,{setSelectedFocus:!0})}else;return t.stopPropagation(),!1;case this.keys.left:var l=this.findNode(o);if(o.is(".tree-parent")&&"true"==o.attr("aria-expanded"))this.toggleNode(o.children("."+this.options.emptyIcon),l,{setSelectedFocus:!0});else{var c=this.getParent(l.nodeId);this.selectNode(c,s)}return t.stopPropagation(),!1;case this.keys.right:var p=this.findNode(o);if(o.is(".tree-parent"))if("false"==o.attr("aria-expanded"))this.toggleNode(o.children("."+this.options.emptyIcon),p,{setSelectedFocus:!0});else{var f=this.findNodes(p.nodeId.toString(),"g","parentId");this.selectNode(f[0],s)}else;return t.stopPropagation(),!1;case this.keys.up:if(0<i){var u=this.$visibleItems.eq(i-1),y=this.findNode(u);this.selectNode(y,s)}return t.stopPropagation(),!1;case this.keys.down:if(i<this.$visibleItems.length-1){var g=this.$visibleItems.eq(i+1),x=this.findNode(g);this.selectNode(x,s)}return t.stopPropagation(),!1}return!0},r.prototype.clickHandler=function(e){this.options.enableLinks||e.preventDefault();var t=b(e.target),o=this.findNode(t);!o||o.state.disabled||this.options.readOnly||this.toggleNode(t,o)},r.prototype.toggleNode=function(e,t,o){o=o||{};var n=t,s=e.attr("class")?e.attr("class").split(" "):[];if(-1!==s.indexOf("expand-icon"))if(this.options.lazyLoad){this.options.lazyLoadFunction="function"==typeof this.options.lazyLoadFunction?this.options.lazyLoadFunction:function(e,t,o){t(e,[],o)},this.forEachIdentifier(t,o,b.proxy(function(s,i){if(s.loaded||s.nodes&&s.nodes.length)s===n&&s.selectable&&this.setSelectedState(s,!0,d.options),this.toggleExpandedState(s,d.options),this.render(i);else{var e=b.proxy(function(e,t){if(t&&t.length)for(var o=0;o<t.length;o++)e.nodes[o]=t[o];else delete e.nodes;s.loaded=!0,this.setInitialStates({nodes:this.tree},0),s===n&&s.selectable&&this.setSelectedState(s,!0,d.options),this.toggleExpandedState(s,d.options),this.render(i)},this);this.options.lazyLoadFunction(s,e,i)}},this))}else this.toggleExpandedState(t,d.options),this.render(o);else-1!==s.indexOf("check-icon")?this.toggleCheckedState(t,d.options):t.selectable&&this.toggleSelectedState(t,d.options),this.render(o)},r.prototype.findNode=function(e){var t=e.closest("li.list-group-item").attr("data-nodeid"),o=this.nodes[t];return o||console.log("Error: node does not exist"),o},r.prototype.toggleExpandedState=function(e,t){e&&this.setExpandedState(e,!e.state.expanded,t)},r.prototype.setExpandedState=function(e,t,o){t!==e.state.expanded&&(t&&e.nodes?(e.state.expanded=!0,o.silent||this.$element.trigger("nodeExpanded",b.extend(!0,{},e))):t||(e.state.expanded=!1,o.silent||this.$element.trigger("nodeCollapsed",b.extend(!0,{},e)),e.nodes&&!o.ignoreChildren&&b.each(e.nodes,b.proxy(function(e,t){this.setExpandedState(t,!1,o)},this))))},r.prototype.toggleSelectedState=function(e,t){e&&this.setSelectedState(e,!e.state.selected,t)},r.prototype.setSelectedState=function(e,t,o){t!==e.state.selected&&(t?(this.options.multiSelect||b.each(this.findNodes("true","g","state.selected"),b.proxy(function(e,t){this.setSelectedState(t,!1,o)},this)),e.state.selected=!0,o.silent||this.$element.trigger("nodeSelected",b.extend(!0,{},e))):(e.state.selected=!1,o.silent||this.$element.trigger("nodeUnselected",b.extend(!0,{},e))))},r.prototype.toggleCheckedState=function(e,t){e&&this.setCheckedState(e,!e.state.checked,t)},r.prototype.setCheckedState=function(e,t,o){t!==e.state.checked&&(t?(e.state.checked=!0,o.silent||this.$element.trigger("nodeChecked",b.extend(!0,{},e))):(e.state.checked=!1,o.silent||this.$element.trigger("nodeUnchecked",b.extend(!0,{},e))))},r.prototype.setDisabledState=function(e,t,o){t!==e.state.disabled&&(t?(e.state.disabled=!0,this.setExpandedState(e,!1,o),this.setSelectedState(e,!1,o),this.setCheckedState(e,!1,o),o.silent||this.$element.trigger("nodeDisabled",b.extend(!0,{},e))):(e.state.disabled=!1,o.silent||this.$element.trigger("nodeEnabled",b.extend(!0,{},e))))},r.prototype.render=function(e){e=e||{},this.initialized||(this.$element.addClass(i),this.$wrapper=b(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0),this.$visibleItems=this.$element.find("li:visible"),e.hasOwnProperty("setSelectedFocus")&&e.setSelectedFocus&&this.$element.find("li.node-selected").focus()},r.prototype.buildTree=function(e,n){if(e){n+=1;var d=this;b.each(e,function(e,t){for(var o=b(d.template.item).addClass(t.nodes?"tree-parent":"").addClass("node-"+d.elementId).addClass(t.state.checked?"node-checked":"").addClass(t.state.disabled?"node-disabled":"").addClass(d.options.readOnly?"node-readonly":"").addClass(t.state.selected?"node-selected":"").addClass(t.searchResult?"search-result":"").attr("data-nodeid",t.nodeId).attr("style",d.buildStyleOverride(t)).attr("aria-expanded",t.state.expanded).attr("tabindex",t.state.selected?0:-1),s=0;s<n-1;s++)o.append(d.template.indent);var i=[];if(t.nodes?(i.push("expand-icon"),t.state.expanded?i.push(d.options.collapseIcon):i.push(d.options.expandIcon)):i.push(d.options.emptyIcon),o.append(b(d.template.icon).addClass(i.join(" "))),d.options.showIcon&&((i=["node-icon"]).push(t.icon||d.options.nodeIcon),t.state.selected&&(i.pop(),i.push(t.selectedIcon||d.options.selectedIcon||t.icon||d.options.nodeIcon)),o.append(b(d.template.icon).addClass(i.join(" ")))),d.options.showCheckbox&&(i=["check-icon"],t.state.checked?i.push(d.options.checkedIcon):i.push(d.options.uncheckedIcon),o.append(b(d.template.icon).addClass(i.join(" ")))),d.options.enableLinks&&!d.options.readOnly?o.append(b(d.template.link).attr("href",t.href).append(t.text)):o.append(t.text),d.options.showTags&&t.tags&&b.each(t.tags,function(e,t){o.append(b(d.template.badge).append(t))}),d.$wrapper.append(o),t.nodes&&t.state.expanded&&!t.state.disabled)return d.buildTree(t.nodes,n)})}},r.prototype.buildStyleOverride=function(e){if(e.state.disabled)return"";var t=e.color,o=e.backColor;return this.options.highlightSelected&&e.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(o=this.options.selectedBackColor)),this.options.highlightSearchResults&&e.searchResult&&!e.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(o=this.options.searchResultBackColor)),"color:"+t+";background-color:"+o+";"},r.prototype.injectStyle=function(){this.options.injectStyle&&!e.getElementById(this.styleId)&&b('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},r.prototype.buildStyle=function(){var e=".node-"+this.elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+e},r.prototype.template={list:'<ul class="list-group" role="tree"></ul>',item:'<li class="list-group-item" role="treeitem" tabindex="-1"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge badge-pill badge-secondary float-right m-2"></span>'},r.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}.treeview .node-readonly{color:silver;cursor:not-allowed}",r.prototype.getNode=function(e){return this.nodes[e]},r.prototype.getParent=function(e){var t=this.identifyNode(e);return this.nodes[t.parentId]},r.prototype.getSiblings=function(e){var t=this.identifyNode(e),o=this.getParent(t);return(o?o.nodes:this.tree).filter(function(e){return e.nodeId!==t.nodeId})},r.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},r.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},r.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},r.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},r.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},r.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},r.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},r.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},r.prototype.selectNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setSelectedState(e,!0,t)},this)),this.render(t)},r.prototype.unselectNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render(t)},r.prototype.toggleNodeSelected=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.toggleSelectedState(e,t)},this)),this.render(t)},r.prototype.collapseAll=function(e){var t=this.findNodes("true","g","state.expanded");this.forEachIdentifier(t,e,b.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render(e)},r.prototype.collapseNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render(t)},r.prototype.expandAll=function(e){if((e=b.extend({},d.options,e))&&e.levels)this.expandLevels(this.tree,e.levels,e);else{var t=this.findNodes("false","g","state.expanded");this.forEachIdentifier(t,e,b.proxy(function(e,t){this.setExpandedState(e,!0,t)},this))}this.render(e)},r.prototype.expandNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setExpandedState(e,!0,t),e.nodes&&t&&t.levels&&this.expandLevels(e.nodes,t.levels-1,t)},this)),this.render(t)},r.prototype.expandLevels=function(e,o,s){s=b.extend({},d.options,s),b.each(e,b.proxy(function(e,t){this.setExpandedState(t,0<o,s),t.nodes&&this.expandLevels(t.nodes,o-1,s)},this))},r.prototype.revealNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){for(var o=this.getParent(e);o;)this.setExpandedState(o,!0,t),o=this.getParent(o)},this)),this.render(t)},r.prototype.toggleNodeExpanded=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.toggleExpandedState(e,t)},this)),this.render(t)},r.prototype.checkAll=function(e){var t=this.findNodes("false","g","state.checked");this.forEachIdentifier(t,e,b.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render(e)},r.prototype.checkNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render(t)},r.prototype.uncheckAll=function(e){var t=this.findNodes("true","g","state.checked");this.forEachIdentifier(t,e,b.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render(e)},r.prototype.uncheckNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render(t)},r.prototype.toggleNodeChecked=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.toggleCheckedState(e,t)},this)),this.render(t)},r.prototype.disableAll=function(e){var t=this.findNodes("false","g","state.disabled");this.forEachIdentifier(t,e,b.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render(e)},r.prototype.disableNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render(t)},r.prototype.enableAll=function(e){var t=this.findNodes("true","g","state.disabled");this.forEachIdentifier(t,e,b.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render(e)},r.prototype.enableNode=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render(t)},r.prototype.toggleNodeDisabled=function(e,t){this.forEachIdentifier(e,t,b.proxy(function(e,t){this.setDisabledState(e,!e.state.disabled,t)},this)),this.render(t)},r.prototype.forEachIdentifier=function(e,o,s){o=b.extend({},d.options,o),e instanceof Array||(e=[e]),b.each(e,b.proxy(function(e,t){s(this.identifyNode(t),o)},this))},r.prototype.identifyNode=function(e){return"number"==typeof e?this.nodes[e]:e},r.prototype.search=function(e,t){t=b.extend({},d.searchOptions,t),this.clearSearch({render:!1});var o=[];if(e&&0<e.length){t.exactMatch&&(e="^"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"$");var s="g";t.ignoreCase&&(s+="i"),o=this.findNodes(e,s),b.each(o,function(e,t){t.searchResult=!0})}return t.revealResults?this.revealNode(o):this.render(t),this.$element.trigger("searchComplete",b.extend(!0,{},o)),o},r.prototype.clearSearch=function(e){e=b.extend({},{render:!0},e);var t=b.each(this.findNodes("true","g","searchResult"),function(e,t){t.searchResult=!1});e.render&&this.render(e),this.$element.trigger("searchCleared",b.extend(!0,{},t))},r.prototype.findNodes=function(o,s,i){s=s||"g",i=i||"text";var n=this;return b.grep(this.nodes,function(e){var t=n.getNodeValue(e,i);if("string"==typeof t)return t.match(new RegExp(o,s))})},r.prototype.getNodeValue=function(e,t){var o=t.indexOf(".");if(0<o){var s=e[t.substring(0,o)],i=t.substring(o+1,t.length);return this.getNodeValue(s,i)}return e.hasOwnProperty(t)&&e[t]!==n?e[t].toString():n};var a=function(e){t.console&&t.console.error(e)};b.fn[i]=function(t,o){var s;return this.each(function(){var e=b.data(this,i);"string"==typeof t?e?b.isFunction(e[t])&&"_"!==t.charAt(0)?(o instanceof Array||(o=[o]),s=e[t].apply(e,o)):a("No such method : "+t):a("Not initialized, can not call method : "+t):"boolean"==typeof t?s=e:b.data(this,i,new r(this,b.extend(!0,{},t)))}),s||this}}(jQuery,window,document);